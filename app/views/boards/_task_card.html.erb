<div 
  class="task-card bg-white rounded-lg shadow-sm border border-gray-200 p-4 hover:shadow-lg hover:border-blue-300 transition-all cursor-pointer"
  data-controller="task-card"
  data-task-card-url-value="<%= project_todo_task_path(project, task.todo, task) %>"
  data-action="click->task-card#open"
  data-task-id="<%= task.id %>">
  
  <div class="flex justify-between items-start mb-2">
    <h4 class="font-medium text-gray-900 flex-1">
      <%= task.title %>
    </h4>
    
    <% if task.done %>
      <span class="inline-flex items-center px-2 py-1 text-xs font-medium text-green-700 bg-green-100 rounded-full">
        âœ“ Completada
      </span>
    <% end %>
  </div>

  <div class="text-sm text-gray-600 mb-3">
    <div class="flex items-center gap-1">
      <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M9 5h-2a2 2 0 0 0 -2 2v12a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-12a2 2 0 0 0 -2 -2h-2" /><path d="M9 3m0 2a2 2 0 0 1 2 -2h2a2 2 0 0 1 2 2v0a2 2 0 0 1 -2 2h-2a2 2 0 0 1 -2 -2z" /></svg>
      <span class="text-xs"><%= task.todo.name %></span>
    </div>
  </div>

  <% if task.due_date.present? %>
    <div class="flex items-center gap-1 text-xs text-gray-500 mb-2">
      <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 7a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v12a2 2 0 0 1 -2 2h-12a2 2 0 0 1 -2 -2v-12z" /><path d="M16 3v4" /><path d="M8 3v4" /><path d="M4 11h16" /></svg>
      <%= l(task.due_date, format: :short) %>
    </div>
  <% end %>

  <div class="flex items-center justify-between mt-3 pt-3 border-t border-gray-100">
    <div class="flex items-center gap-1 text-xs text-gray-500">
      <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M8 7a4 4 0 1 0 8 0a4 4 0 0 0 -8 0" /><path d="M6 21v-2a4 4 0 0 1 4 -4h4a4 4 0 0 1 4 4v2" /></svg>
      <%= task.created_by.email.split('@').first %>
    </div>

    <%= button_to remove_from_board_board_task_path(task, board_id: board.id),
        method: :delete,
        form: { data: { turbo_confirm: "Â¿Remover esta tarea del tablero?" } },
        class: "text-xs text-red-600 hover:text-red-800" do %>
      <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M18 6l-12 12" /><path d="M6 6l12 12" /></svg>
    <% end %>
  </div>
</div>
