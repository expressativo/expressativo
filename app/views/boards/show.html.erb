<div class="mb-4">
  <div class="flex justify-between items-center mb-4">
    <div>
      <h1 class="text-2xl font-semibold"><%= @board.title %></h1>
      <% if @board.description.present? %>
        <p class="text-gray-600 mt-1"><%= @board.description %></p>
      <% end %>
    </div>
    <div class="flex gap-2">
      <%= link_to "Agregar tareas", add_tasks_project_board_path(@project, @board), class: "button" %>
      <%= link_to "Editar tablero", edit_project_board_path(@project, @board), class: "button-outline" %>
      <%= link_to "Volver", project_boards_path(@project), class: "button-outline" %>
    </div>
  </div>
</div>

<!-- Tablero Kanban -->
<div class="overflow-x-auto pb-4">
  <div 
    data-controller="kanban" 
    class="flex gap-4 min-h-screen"
    style="min-width: max-content;">
    
    <% @columns.each do |column| %>
      <div class="flex-shrink-0 w-80">
        <!-- Encabezado de columna -->
        <div class="bg-gray-100 rounded-t-lg px-4 py-3 border-b-2 border-gray-300">
          <div class="flex justify-between items-center">
            <h3 class="font-semibold text-gray-700">
              <%= column.title %>
              <span class="text-sm text-gray-500 ml-2">(<%= column.tasks.count %>)</span>
            </h3>
          </div>
        </div>

        <!-- Lista de tareas -->
        <div 
          data-kanban-target="column"
          data-column-id="<%= column.id %>"
          class="bg-gray-50 rounded-b-lg p-4 min-h-[200px] space-y-3">
          
          <% column.tasks.each do |task| %>
            <%= render 'boards/task_card', task: task, board: @board, project: @project %>
          <% end %>
        </div>
      </div>
    <% end %>
  </div>
</div>
