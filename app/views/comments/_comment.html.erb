<%= turbo_frame_tag dom_id(comment) do %>
  <div id="comment_<%= comment.id %>" class="bg-white p-4 border-b border-gray-300">
    <div class="flex justify-between items-start">
      <div class="flex items-center">
        <%= user_avatar(comment.user) %>
        <% if comment.user.full_name %>
          <p class="text-sm text-gray-600"><%= comment.user.full_name %></p>
        <% else %>
          <p class="text-sm text-gray-600"><%= comment.user.email %></p>
        <% end %>
      </div>
      <div class="flex items-center gap-3">
        <div class="flex flex-col items-end">
          <p class="text-xs text-gray-500"><%= time_ago_in_words(comment.created_at) %> atrás</p>
          <p class="text-xs text-gray-500"><%= comment.created_at.strftime('%d/%m/%Y %H:%M') %></p>
        </div>
        
        <% if comment.user == current_user %>
          <div class="flex items-center gap-1">
            <%= link_to edit_project_todo_task_comment_path(@project, @todo, @task, comment), 
                class: "p-1 text-gray-600 hover:text-indigo-600 transition-colors",
                title: "Editar",
                data: { turbo_frame: dom_id(comment) } do %>
              <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z"/>
              </svg>
            <% end %>
            
            <%= button_to project_todo_task_comment_path(@project, @todo, @task, comment),
                method: :delete,
                class: "p-1 text-gray-600 hover:text-red-600 transition-colors",
                title: "Eliminar",
                data: { 
                  turbo_confirm: "¿Estás seguro de que deseas eliminar este comentario?"
                } do %>
              <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
                <path d="M4 7l16 0" />
                <path d="M10 11l0 6" />
                <path d="M14 11l0 6" />
                <path d="M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12" />
                <path d="M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3" />
              </svg>
            <% end %>
          </div>
        <% end %>
      </div>
    </div>
    
    <div class="mt-2 text-gray-900 prose max-w-none">
      <%= comment.content %>
    </div>
  </div>
<% end %>
