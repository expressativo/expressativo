<div class="p-4 md:px-24 w-full md:max-w-2xl lg:max-w-6xl m-auto">
  <%= link_to edit_project_todo_task_path(@project, @todo, task), data: { turbo_frame: "#{dom_id(task)}_form" } do %>
    <div class="grid grid-cols-6 gap-4 mt-4">
      <div class="col-span-1 flex justify-end">
        <input type="checkbox" class="w-8 h-8" <%= task.done ? 'checked' : '' %>>
      </div>
      <div class="col-span-4">
        <h2 class="text-2xl font-semibold text-gray-900">
          <%= task.title %>
        </h2>
      </div>
    </div>
    <div class="grid grid-cols-6 gap-4 mt-4">
      <div class="col-span-1">
        <div class="flex justify-end items-center gap-2 text-xs md:text-base">
          Asignado a:
        </div>
      </div>
      <div class="col-span-5">
        <%= render 'tasks/assignees_display', task: task %>
      </div>
    </div>
    <div class="grid grid-cols-6 gap-4 mt-4">
      <div class="col-span-1">
        <div class="flex justify-end items-center gap-2 text-xs md:text-base">
          Vence el:
        </div>
      </div>
      <div class="col-span-5">
        <div class="flex justify-start items-center gap-2">
          <% if task.due_date.present?  %>
            <%= l(task.due_date, format: :long) %>
          <% else %>
            <span class="text-gray-400 italic ">
              Selecciona una fecha...
            </span>
          <% end %>
        </div>
      </div>
    </div>
    <div class="grid grid-cols-6 gap-4 mt-4">
      <div class="col-span-1">
        <div class="flex justify-end items-center gap-2 text-xs md:text-base">
          Estatus:
        </div>
      </div>
      <div class="col-span-5">
        <div class="flex items-center gap-3">
          <% if task.column.present? %>
            <div class="inline-flex items-center gap-2 px-3 py-1 bg-blue-50 border border-blue-200 rounded-lg">
              <span class="text-sm font-medium text-gray-900">
                <%= task.column.title %>
              </span>
              <span class="text-xs text-gray-500">
                · <%= task.column.board.title %>
              </span>
            </div>
          <% else %>
            <span class="text-gray-400 italic">
              Sin estatus asignado
            </span>
            <%= button_to "Agregar a tablero", 
                          add_to_board_board_task_path(task), 
                          method: :post,
                          data: { 
                            turbo_submits_with: "Agregando...",
                            turbo_confirm: "¿Agregar esta tarea al primer tablero disponible?"
                          },
                          class: "button text-sm py-1 px-3" %>
          <% end %>
        </div>
      </div>
    </div>
  <% end %>
  <div class="grid grid-cols-6 gap-4 mt-4">
    <div class="col-span-1">
      <div class="flex justify-end items-center gap-2 text-xs md:text-base">
        Notas:
      </div>
    </div>
    <div class="col-span-5 overflow-hidden text-overflow-hidden text-base w-full">
      <% if task.notes.present? %>
        <%= task.notes %>
      <% else %>
        - Sin notas
      <%end%>
    </div>
  </div>
  <div class="grid grid-cols-6 gap-4 mt-4">
    <div class="col-span-2">
      <div class="flex justify-end items-center text-xs text-gray-500">
        Agregado por:
      </div>
    </div>
    <div class="flex justify-start items-center text-xs text-gray-500">
      <%= task.created_by&.email || 'Sin usuario' %>
    </div>
  </div>
</div>
